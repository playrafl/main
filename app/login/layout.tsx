import { ReactNode } from "react";
import { cookies } from "next/headers";
import { AUTH_KEY } from "@/constants/auth.constant";
import { redirect } from "next/navigation";
import { Metadata } from "next";

export const metadata: Metadata = {
  title: "Sign In | Rafl",
  description: "Generated by Rafl",
};

export default async function LoginLayout({
  children,
}: {
  children: ReactNode;
}) {
  await getToken();

  return <>{children}</>;
}

async function getToken() {
  const nextCookies = await cookies(); // Get cookies object
  const cookie = nextCookies.get(AUTH_KEY); // Find cookie
  if (cookie && cookie.value) {
    cookie.value && redirect("/accounts");
  }
}
